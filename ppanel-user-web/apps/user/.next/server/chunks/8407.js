"use strict";exports.id=8407,exports.ids=[8407],exports.modules={5296:(a,b,c)=>{c.d(b,{M:()=>h});var d=c(81256),e=c(36402),f=c(2992),g=c(74123);function h({order:a}){let b=(0,g.useTranslations)("subscribe");return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"font-semibold",children:b("billing.billingTitle")}),(0,d.jsxs)("ul",{className:"grid grid-cols-2 gap-3 *:flex *:items-center *:justify-between lg:grid-cols-1",children:[a?.type&&[1,2].includes(a?.type)&&(0,d.jsxs)("li",{children:[(0,d.jsx)("span",{className:"text-muted-foreground",children:b("billing.duration")}),(0,d.jsxs)("span",{children:[a?.quantity||1," ",b(a?.unit_time||"Month")]})]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("span",{className:"text-muted-foreground",children:b("billing.price")}),(0,d.jsx)("span",{children:(0,d.jsx)(e.n,{type:"currency",value:a?.price||a?.unit_price})})]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("span",{className:"text-muted-foreground",children:b("billing.productDiscount")}),(0,d.jsx)("span",{children:(0,d.jsx)(e.n,{type:"currency",value:a?.discount})})]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("span",{className:"text-muted-foreground",children:b("billing.couponDiscount")}),(0,d.jsx)("span",{children:(0,d.jsx)(e.n,{type:"currency",value:a?.coupon_discount})})]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("span",{className:"text-muted-foreground",children:b("billing.fee")}),(0,d.jsx)("span",{children:(0,d.jsx)(e.n,{type:"currency",value:a?.fee_amount})})]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("span",{className:"text-muted-foreground",children:b("billing.gift")}),(0,d.jsx)("span",{children:(0,d.jsx)(e.n,{type:"currency",value:a?.gift_amount})})]})]}),(0,d.jsx)(f.w,{}),(0,d.jsxs)("div",{className:"flex items-center justify-between font-semibold",children:[(0,d.jsx)("span",{className:"text-muted-foreground",children:b("billing.total")}),(0,d.jsx)("span",{children:(0,d.jsx)(e.n,{type:"currency",value:a?.amount})})]})]})}},15556:(a,b,c)=>{c.d(b,{E:()=>h});var d=c(81256),e=c(43554);c(68057);var f=c(90171);let g=(0,e.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function h({className:a,variant:b,...c}){return(0,d.jsx)("div",{className:(0,f.cn)(g({variant:b}),a),...c})}},48374:(a,b,c)=>{c.d(b,{_:()=>g});var d=c(81256),e=c(36402),f=c(74123);function g({subscribe:a}){let b=(0,f.useTranslations)("subscribe.detail");return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"font-semibold",children:b("productDetail")}),(0,d.jsxs)("ul",{className:"grid grid-cols-1 gap-3 *:flex *:items-center *:justify-between lg:grid-cols-1",children:[a?.name&&(0,d.jsxs)("li",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-muted-foreground line-clamp-2 flex-1",children:a?.name}),(0,d.jsxs)("span",{children:["x ",(0,d.jsx)("span",{children:a?.quantity||1})]})]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("span",{className:"text-muted-foreground",children:b("availableTraffic")}),(0,d.jsx)("span",{children:(0,d.jsx)(e.n,{type:"traffic",value:a?.traffic,unlimited:!0})})]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("span",{className:"text-muted-foreground",children:b("connectionSpeed")}),(0,d.jsx)("span",{children:(0,d.jsx)(e.n,{type:"trafficSpeed",value:a?.speed_limit,unlimited:!0})})]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("span",{className:"text-muted-foreground",children:b("connectedDevices")}),(0,d.jsx)("span",{children:(0,d.jsx)(e.n,{value:a?.device_limit,type:"number",unlimited:!0})})]})]})]})}},48840:(a,b,c)=>{c.d(b,{A:()=>q});var d=c(81256),e=c(56882),f=c(655),g=c(32141),h=c(25825),i=c(22643),j=c(89158),k=c(74123),l=c(81095),m=c(80327),n=c(68057);let o=({clientSecret:a,onError:b})=>{let c=(0,e.t2)(),{theme:f,systemTheme:m}=(0,l.D)(),o=(0,e.HH)(),[p,q]=(0,n.useState)(!1),[r,s]=(0,n.useState)(!1),[t,u]=(0,n.useState)({}),[v,w]=(0,n.useState)(""),x=(0,k.useTranslations)("payment.stripe.card"),y={base:{fontSize:"16px",color:"dark"===("system"===f?m:f)?"#fff":"#000","::placeholder":{color:"#aab7c4"}},invalid:{color:"#EF4444",iconColor:"#EF4444"}},z=(a,b)=>{a.error?u(c=>({...c,[b]:a.error.message})):u(a=>({...a,[b]:void 0}))},A=async d=>{if(d.preventDefault(),!c||!o)return void b(x("loading"));if(!v.trim())return void u(a=>({...a,name:x("name_required")}));q(!0);let f=o.getElement(e._D),g=o.getElement(e.qs),h=o.getElement(e.JG);if(!f||!g||!h){b(x("element_error")),q(!1);return}let{error:i,paymentIntent:j}=await c.confirmCardPayment(a,{payment_method:{card:f,billing_details:{name:v}}});i?b(i.message||x("payment_failed")):j&&"succeeded"===j.status?s(!0):b(x("processing")),q(!1)};return(0,d.jsx)("form",{onSubmit:A,children:r?(0,d.jsxs)("div",{className:"py-6 text-center",children:[(0,d.jsx)("div",{className:"mb-4 flex justify-center",children:(0,d.jsx)(j.A,{className:"h-12 w-12 text-green-500"})}),(0,d.jsx)("p",{className:"text-xl font-medium",children:x("success_title")}),(0,d.jsx)("p",{className:"text-muted-foreground mt-2",children:x("success_message")})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)(i.J,{htmlFor:"cardholderName",className:"text-sm font-medium",children:x("card_name")}),(0,d.jsx)(h.p,{id:"cardholderName",type:"text",value:v,onChange:a=>w(a.target.value),placeholder:x("name_placeholder"),className:t.name?"border-destructive":""}),t.name&&(0,d.jsx)("p",{className:"text-destructive text-xs",children:t.name})]}),(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)(i.J,{htmlFor:"cardNumber",className:"text-sm font-medium",children:x("card_number")}),(0,d.jsx)("div",{className:"relative",children:(0,d.jsx)("div",{className:`focus-within:border-primary focus-within:ring-primary rounded-md border p-3 focus-within:ring-1 ${t.cardNumber?"border-red-500":""}`,children:(0,d.jsx)(e._D,{id:"cardNumber",options:{style:y,showIcon:!0},onChange:a=>z(a,"cardNumber")})})}),t.cardNumber&&(0,d.jsx)("p",{className:"text-destructive text-xs",children:t.cardNumber})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)(i.J,{htmlFor:"cardExpiry",className:"text-sm font-medium",children:x("expiry_date")}),(0,d.jsx)("div",{className:`focus-within:border-primary focus-within:ring-primary rounded-md border p-3 focus-within:ring-1 ${t.cardExpiry?"border-red-500":""}`,children:(0,d.jsx)(e.qs,{id:"cardExpiry",options:{style:y},onChange:a=>z(a,"cardExpiry")})}),t.cardExpiry&&(0,d.jsx)("p",{className:"text-destructive text-xs",children:t.cardExpiry})]}),(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)(i.J,{htmlFor:"cardCvc",className:"text-sm font-medium",children:x("security_code")}),(0,d.jsx)("div",{className:`focus-within:border-primary focus-within:ring-primary rounded-md border p-3 focus-within:ring-1 ${t.cardCvc?"border-red-500":""}`,children:(0,d.jsx)(e.JG,{id:"cardCvc",options:{style:y},onChange:a=>z(a,"cardCvc")})}),t.cardCvc&&(0,d.jsx)("p",{className:"text-destructive text-xs",children:t.cardCvc})]})]})]}),(0,d.jsxs)("div",{className:"mt-6 flex flex-col space-y-4",children:[(0,d.jsx)(g.$,{type:"submit",disabled:p||!c||!o,className:"w-full",children:p?x("processing_button"):x("pay_button")}),(0,d.jsx)("p",{className:"text-muted-foreground text-center text-xs",children:x("secure_notice")})]})]})})},p=({client_secret:a,method:b})=>{let c=(0,e.t2)(),[f,g]=(0,n.useState)(null),[h,i]=(0,n.useState)(null),[j,l]=(0,n.useState)(!1),p=(0,k.useTranslations)("payment.stripe"),q=(0,n.useCallback)(a=>{g(a),l(!1)},[]),r=(0,n.useCallback)(async()=>c?"alipay"===b?await c.confirmAlipayPayment(a,{return_url:window.location.href},{handleActions:!1}):"wechat_pay"===b?await c.confirmWechatPayPayment(a,{payment_method_options:{wechat_pay:{client:"web"}}},{handleActions:!1}):null:(q(p("card.loading")),null),[a,b,c,q,p]),s=(0,n.useCallback)(async()=>{if(!j&&"card"!==b){l(!0);try{let a=await r();if(!a)return;let{error:c,paymentIntent:d}=a;if(c)return q(c.message);if(d?.status==="requires_action"){let a=d.next_action,c="alipay"===b?a?.alipay_handle_redirect?.url:a?.wechat_pay_display_qr_code?.image_url_svg;i(c||null)}}catch(a){q(p("error"))}}},[r,j,q,b,p]);return(0,n.useEffect)(()=>{s()},[s]),"card"===b?(0,d.jsx)("div",{className:"min-w-80 text-left",children:(0,d.jsx)(o,{clientSecret:a,onError:q})}):h?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(m.X,{value:h,size:208,imageSettings:{src:`/payment/${b}.svg`,width:24,height:24,excavate:!0}}),(0,d.jsx)("p",{className:"text-muted-foreground mt-4 text-center",children:p(`qrcode.${b}`)})]}):f},q=({method:a,client_secret:b,publishable_key:c})=>{let g=(0,n.useMemo)(()=>(0,f.c)(c),[c]);return(0,d.jsx)(e.S8,{stripe:g,children:(0,d.jsx)(p,{method:a,client_secret:b})})}}};