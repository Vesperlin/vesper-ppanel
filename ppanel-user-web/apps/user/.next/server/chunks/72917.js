"use strict";exports.id=72917,exports.ids=[72917],exports.modules={5296:(a,b,c)=>{c.d(b,{M:()=>h});var d=c(81256),e=c(36402),f=c(2992),g=c(74123);function h({order:a}){let b=(0,g.useTranslations)("subscribe");return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"font-semibold",children:b("billing.billingTitle")}),(0,d.jsxs)("ul",{className:"grid grid-cols-2 gap-3 *:flex *:items-center *:justify-between lg:grid-cols-1",children:[a?.type&&[1,2].includes(a?.type)&&(0,d.jsxs)("li",{children:[(0,d.jsx)("span",{className:"text-muted-foreground",children:b("billing.duration")}),(0,d.jsxs)("span",{children:[a?.quantity||1," ",b(a?.unit_time||"Month")]})]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("span",{className:"text-muted-foreground",children:b("billing.price")}),(0,d.jsx)("span",{children:(0,d.jsx)(e.n,{type:"currency",value:a?.price||a?.unit_price})})]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("span",{className:"text-muted-foreground",children:b("billing.productDiscount")}),(0,d.jsx)("span",{children:(0,d.jsx)(e.n,{type:"currency",value:a?.discount})})]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("span",{className:"text-muted-foreground",children:b("billing.couponDiscount")}),(0,d.jsx)("span",{children:(0,d.jsx)(e.n,{type:"currency",value:a?.coupon_discount})})]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("span",{className:"text-muted-foreground",children:b("billing.fee")}),(0,d.jsx)("span",{children:(0,d.jsx)(e.n,{type:"currency",value:a?.fee_amount})})]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("span",{className:"text-muted-foreground",children:b("billing.gift")}),(0,d.jsx)("span",{children:(0,d.jsx)(e.n,{type:"currency",value:a?.gift_amount})})]})]}),(0,d.jsx)(f.w,{}),(0,d.jsxs)("div",{className:"flex items-center justify-between font-semibold",children:[(0,d.jsx)("span",{className:"text-muted-foreground",children:b("billing.total")}),(0,d.jsx)("span",{children:(0,d.jsx)(e.n,{type:"currency",value:a?.amount})})]})]})}},8019:(a,b,c)=>{c.d(b,{A:()=>j});var d=c(81256),e=c(15556),f=c(22643),g=c(52626),h=c(74123),i=c(68057);let j=({quantity:a,unitTime:b="Month",discounts:c=[],onChange:j})=>{let k=(0,h.useTranslations)("subscribe"),l=(0,i.useCallback)(a=>{j(Number(a))},[j]),m=({value:a,label:b})=>(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(g.C,{value:a,id:a,className:"peer sr-only"}),(0,d.jsx)(f.J,{htmlFor:a,className:"border-muted bg-popover hover:bg-accent hover:text-accent-foreground peer-data-[state=checked]:border-primary relative flex h-full flex-col items-center justify-center gap-2 rounded-md border-2 p-2",children:b})]}),n=c?.find(b=>b.quantity===a)?.discount,o=n?100-n:0;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"font-semibold",children:k("purchaseDuration")}),(0,d.jsxs)(g.z,{value:String(a),onValueChange:l,className:"flex flex-wrap gap-3",children:["Minute"!==b&&(0,d.jsx)(m,{value:"1",label:`1 / ${k(b)}`}),c?.map(a=>(0,d.jsx)(m,{value:String(a.quantity),label:`${a.quantity} / ${k(b)}`},a.quantity))]}),(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("span",{className:"text-muted-foreground text-sm",children:[k("discountInfo"),":"]}),o>0?(0,d.jsxs)(e.E,{variant:"destructive",className:"h-6 text-sm",children:["-",o,"% ",k("discount")]}):(0,d.jsx)("span",{className:"text-muted-foreground h-6 text-sm",children:"--"})]})]})}},15556:(a,b,c)=>{c.d(b,{E:()=>h});var d=c(81256),e=c(43554);c(68057);var f=c(90171);let g=(0,e.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function h({className:a,variant:b,...c}){return(0,d.jsx)("div",{className:(0,f.cn)(g({variant:b}),a),...c})}},48374:(a,b,c)=>{c.d(b,{_:()=>g});var d=c(81256),e=c(36402),f=c(74123);function g({subscribe:a}){let b=(0,f.useTranslations)("subscribe.detail");return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"font-semibold",children:b("productDetail")}),(0,d.jsxs)("ul",{className:"grid grid-cols-1 gap-3 *:flex *:items-center *:justify-between lg:grid-cols-1",children:[a?.name&&(0,d.jsxs)("li",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-muted-foreground line-clamp-2 flex-1",children:a?.name}),(0,d.jsxs)("span",{children:["x ",(0,d.jsx)("span",{children:a?.quantity||1})]})]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("span",{className:"text-muted-foreground",children:b("availableTraffic")}),(0,d.jsx)("span",{children:(0,d.jsx)(e.n,{type:"traffic",value:a?.traffic,unlimited:!0})})]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("span",{className:"text-muted-foreground",children:b("connectionSpeed")}),(0,d.jsx)("span",{children:(0,d.jsx)(e.n,{type:"trafficSpeed",value:a?.speed_limit,unlimited:!0})})]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("span",{className:"text-muted-foreground",children:b("connectedDevices")}),(0,d.jsx)("span",{children:(0,d.jsx)(e.n,{value:a?.device_limit,type:"number",unlimited:!0})})]})]})]})}},72917:(a,b,c)=>{c.r(b),c.d(b,{default:()=>B});var d=c(81256),e=c(36402),f=c(43886);async function g(a,b){return(0,f.A)("/v1/public/subscribe/list",{method:"GET",params:{...a},...b||{}})}var h=c(90586),i=c(32141),j=c(14507),k=c(2992),l=c(9870),m=c(90171),n=c(74123),o=c(68057),p=c(38487),q=c(48374),r=c(99860),s=c(8019),t=c(60922),u=c(96187),v=c(10378),w=c(28093),x=c(69476),y=c(40230),z=c(5296);function A({subscribe:a,setSubscribe:b}){let c=(0,n.useTranslations)("subscribe"),{getUserInfo:e}=(0,u.A)(),f=(0,y.useRouter)(),[g,l]=(0,o.useState)({quantity:1,subscribe_id:0,payment:-1,coupon:""}),[m,p]=(0,o.useTransition)(),A=(0,o.useRef)(null),{data:B}=(0,h.I)({enabled:!!a?.id,queryKey:["preCreateOrder",g],queryFn:async()=>{try{let{data:b}=await (0,v.mB)({...g,subscribe_id:a?.id}),c=b.data;return c&&(A.current=c),c}catch(a){if(A.current)return A.current;throw a}}}),C=(0,o.useCallback)((a,b)=>{l(c=>({...c,[a]:b}))},[]),D=(0,o.useCallback)(async()=>{p(async()=>{try{let a=await (0,v.Ov)(g),b=a.data.data?.order_no;b&&(e(),f.push(`/payment?order_no=${b}`))}catch(a){}})},[g,f,e]);return(0,d.jsx)(w.Dialog,{open:!!a?.id,onOpenChange:a=>{a||b(void 0)},children:(0,d.jsxs)(w.DialogContent,{className:"flex h-full max-w-screen-lg flex-col overflow-hidden border-none p-0 md:h-auto",children:[(0,d.jsx)(w.DialogHeader,{className:"p-6 pb-0",children:(0,d.jsx)(w.DialogTitle,{children:c("buySubscription")})}),(0,d.jsxs)("div",{className:"grid w-full flex-grow gap-3 overflow-auto p-6 pt-0 lg:grid-cols-2",children:[(0,d.jsx)(j.Zp,{className:"border-transparent shadow-none md:border-inherit md:shadow",children:(0,d.jsxs)(j.Wu,{className:"grid gap-3 p-0 text-sm md:p-6",children:[(0,d.jsx)(q._,{subscribe:{...a,quantity:g.quantity}}),(0,d.jsx)(k.w,{}),(0,d.jsx)(z.M,{order:{...B,quantity:g.quantity,unit_price:a?.unit_price}})]})}),(0,d.jsxs)("div",{className:"flex flex-col justify-between text-sm",children:[(0,d.jsxs)("div",{className:"mb-6 grid gap-3",children:[(0,d.jsx)(s.A,{quantity:g.quantity,unitTime:a?.unit_time,discounts:a?.discount,onChange:a=>{C("quantity",a)}}),(0,d.jsx)(r.A,{coupon:g.coupon,onChange:a=>C("coupon",a)}),(0,d.jsx)(t.A,{value:g.payment,onChange:a=>{C("payment",a)}})]}),(0,d.jsxs)(i.$,{className:"fixed bottom-0 left-0 w-full rounded-none md:relative md:mt-6",disabled:m,onClick:D,children:[m&&(0,d.jsx)(x.A,{className:"mr-2 animate-spin"}),c("buyNow")]})]})]})]})})}function B(){let a=(0,n.useTranslations)("subscribe"),b=(0,n.useLocale)(),[c,f]=(0,o.useState)(),{data:r}=(0,h.I)({queryKey:["querySubscribeList",b],queryFn:async()=>{console.log("Fetching subscription list...");let{data:a}=await g({language:b});return a.data?.list||[]}}),s=r?.filter(a=>a.show);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3",children:s?.map(b=>(0,d.jsxs)(j.Zp,{className:"flex flex-col",children:[(0,d.jsx)(j.aR,{className:"bg-muted/50 text-xl font-medium",children:b.name}),(0,d.jsxs)(j.Wu,{className:"flex flex-grow flex-col gap-3 p-6 *:!text-sm",children:[(0,d.jsx)("ul",{className:"flex flex-grow flex-col gap-3",children:(()=>{let a;try{a=JSON.parse(b.description)}catch{a={description:"",features:[]}}let{description:c,features:e}=a;return(0,d.jsxs)(d.Fragment,{children:[c&&(0,d.jsx)("li",{className:"text-muted-foreground",children:c}),e?.map((a,b)=>(0,d.jsxs)("li",{className:(0,m.cn)("flex items-center gap-1",{"text-muted-foreground line-through":"destructive"===a.type}),children:[a.icon&&(0,d.jsx)(l.Icon,{icon:a.icon,className:(0,m.cn)("text-primary size-5",{"text-green-500":"success"===a.type,"text-destructive":"destructive"===a.type})}),a.label]},b))]})})()}),(0,d.jsx)(q._,{subscribe:{...b,name:void 0}})]}),(0,d.jsx)(k.w,{}),(0,d.jsxs)(j.wL,{className:"relative mt-2 flex flex-col gap-2",children:[(0,d.jsxs)("h2",{className:"pb-5 text-2xl font-semibold sm:text-3xl",children:[(0,d.jsx)(e.n,{type:"currency",value:b.unit_price}),(0,d.jsxs)("span",{className:"text-base font-medium",children:["/",a(b.unit_time||"Month")]})]}),(0,d.jsx)(i.$,{className:"absolute bottom-0 w-full rounded-b-xl rounded-t-none",onClick:()=>{f(b)},children:a("buy")})]})]},b.id))}),s?.length===0&&(0,d.jsx)(p.Empty,{})]}),(0,d.jsx)(A,{subscribe:c,setSubscribe:f})]})}},99860:(a,b,c)=>{c.d(b,{A:()=>g});var d=c(81256),e=c(25825),f=c(74123);c(68057);let g=({coupon:a,onChange:b})=>{let c=(0,f.useTranslations)("subscribe");return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"font-semibold",children:c("coupon")}),(0,d.jsx)(e.p,{placeholder:c("enterCoupon"),value:a,onChange:a=>b(a.target.value.trim())})]})}}};