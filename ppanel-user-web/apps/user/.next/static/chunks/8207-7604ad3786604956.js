"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8207],{6492:(e,r,s)=>{s.d(r,{Icon:()=>a});var t=s(42289),n=s(59077);function a(e){return(0,t.jsx)(n.In,{...e})}},12040:(e,r,s)=>{s.d(r,{A:()=>f});var t=s(42289),n=s(85316),a=s(31566),i=s(55033),l=s(72511),d=s(62725),c=s(50200),o=s(70381),u=s(70345),m=s(42405),x=s(86645);let p=e=>{let{clientSecret:r,onError:s}=e,a=(0,n.useStripe)(),{theme:m,systemTheme:p}=(0,u.D)(),h=(0,n.useElements)(),[f,v]=(0,x.useState)(!1),[j,y]=(0,x.useState)(!1),[g,b]=(0,x.useState)({}),[N,w]=(0,x.useState)(""),_=(0,o.useTranslations)("payment.stripe.card"),C={base:{fontSize:"16px",color:"dark"===("system"===m?p:m)?"#fff":"#000","::placeholder":{color:"#aab7c4"}},invalid:{color:"#EF4444",iconColor:"#EF4444"}},E=(e,r)=>{e.error?b(s=>({...s,[r]:e.error.message})):b(e=>({...e,[r]:void 0}))},S=async e=>{if(e.preventDefault(),!a||!h)return void s(_("loading"));if(!N.trim())return void b(e=>({...e,name:_("name_required")}));v(!0);let t=h.getElement(n.CardNumberElement),i=h.getElement(n.CardExpiryElement),l=h.getElement(n.CardCvcElement);if(!t||!i||!l){s(_("element_error")),v(!1);return}let{error:d,paymentIntent:c}=await a.confirmCardPayment(r,{payment_method:{card:t,billing_details:{name:N}}});d?s(d.message||_("payment_failed")):c&&"succeeded"===c.status?y(!0):s(_("processing")),v(!1)};return(0,t.jsx)("form",{onSubmit:S,children:j?(0,t.jsxs)("div",{className:"py-6 text-center",children:[(0,t.jsx)("div",{className:"mb-4 flex justify-center",children:(0,t.jsx)(c.A,{className:"h-12 w-12 text-green-500"})}),(0,t.jsx)("p",{className:"text-xl font-medium",children:_("success_title")}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2",children:_("success_message")})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(d.J,{htmlFor:"cardholderName",className:"text-sm font-medium",children:_("card_name")}),(0,t.jsx)(l.p,{id:"cardholderName",type:"text",value:N,onChange:e=>w(e.target.value),placeholder:_("name_placeholder"),className:g.name?"border-destructive":""}),g.name&&(0,t.jsx)("p",{className:"text-destructive text-xs",children:g.name})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(d.J,{htmlFor:"cardNumber",className:"text-sm font-medium",children:_("card_number")}),(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)("div",{className:"focus-within:border-primary focus-within:ring-primary rounded-md border p-3 focus-within:ring-1 ".concat(g.cardNumber?"border-red-500":""),children:(0,t.jsx)(n.CardNumberElement,{id:"cardNumber",options:{style:C,showIcon:!0},onChange:e=>E(e,"cardNumber")})})}),g.cardNumber&&(0,t.jsx)("p",{className:"text-destructive text-xs",children:g.cardNumber})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(d.J,{htmlFor:"cardExpiry",className:"text-sm font-medium",children:_("expiry_date")}),(0,t.jsx)("div",{className:"focus-within:border-primary focus-within:ring-primary rounded-md border p-3 focus-within:ring-1 ".concat(g.cardExpiry?"border-red-500":""),children:(0,t.jsx)(n.CardExpiryElement,{id:"cardExpiry",options:{style:C},onChange:e=>E(e,"cardExpiry")})}),g.cardExpiry&&(0,t.jsx)("p",{className:"text-destructive text-xs",children:g.cardExpiry})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(d.J,{htmlFor:"cardCvc",className:"text-sm font-medium",children:_("security_code")}),(0,t.jsx)("div",{className:"focus-within:border-primary focus-within:ring-primary rounded-md border p-3 focus-within:ring-1 ".concat(g.cardCvc?"border-red-500":""),children:(0,t.jsx)(n.CardCvcElement,{id:"cardCvc",options:{style:C},onChange:e=>E(e,"cardCvc")})}),g.cardCvc&&(0,t.jsx)("p",{className:"text-destructive text-xs",children:g.cardCvc})]})]})]}),(0,t.jsxs)("div",{className:"mt-6 flex flex-col space-y-4",children:[(0,t.jsx)(i.$,{type:"submit",disabled:f||!a||!h,className:"w-full",children:f?_("processing_button"):_("pay_button")}),(0,t.jsx)("p",{className:"text-muted-foreground text-center text-xs",children:_("secure_notice")})]})]})})},h=e=>{let{client_secret:r,method:s}=e,a=(0,n.useStripe)(),[i,l]=(0,x.useState)(null),[d,c]=(0,x.useState)(null),[u,h]=(0,x.useState)(!1),f=(0,o.useTranslations)("payment.stripe"),v=(0,x.useCallback)(e=>{l(e),h(!1)},[]),j=(0,x.useCallback)(async()=>a?"alipay"===s?await a.confirmAlipayPayment(r,{return_url:window.location.href},{handleActions:!1}):"wechat_pay"===s?await a.confirmWechatPayPayment(r,{payment_method_options:{wechat_pay:{client:"web"}}},{handleActions:!1}):null:(v(f("card.loading")),null),[r,s,a,v,f]),y=(0,x.useCallback)(async()=>{if(!u&&"card"!==s){h(!0);try{let t=await j();if(!t)return;let{error:n,paymentIntent:a}=t;if(n)return v(n.message);if((null==a?void 0:a.status)==="requires_action"){var e,r;let t=a.next_action,n="alipay"===s?null==t||null==(e=t.alipay_handle_redirect)?void 0:e.url:null==t||null==(r=t.wechat_pay_display_qr_code)?void 0:r.image_url_svg;c(n||null)}}catch(e){v(f("error"))}}},[j,u,v,s,f]);return(0,x.useEffect)(()=>{y()},[y]),"card"===s?(0,t.jsx)("div",{className:"min-w-80 text-left",children:(0,t.jsx)(p,{clientSecret:r,onError:v})}):d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.X,{value:d,size:208,imageSettings:{src:"/payment/".concat(s,".svg"),width:24,height:24,excavate:!0}}),(0,t.jsx)("p",{className:"text-muted-foreground mt-4 text-center",children:f("qrcode.".concat(s))})]}):i},f=e=>{let{method:r,client_secret:s,publishable_key:i}=e,l=(0,x.useMemo)(()=>(0,a.c)(i),[i]);return(0,t.jsx)(n.Elements,{stripe:l,children:(0,t.jsx)(h,{method:r,client_secret:s})})}},30862:(e,r,s)=>{s.d(r,{w:()=>l});var t=s(42289),n=s(31849),a=s(86645),i=s(54577);let l=a.forwardRef((e,r)=>{let{className:s,orientation:a="horizontal",decorative:l=!0,...d}=e;return(0,t.jsx)(n.b,{ref:r,decorative:l,orientation:a,className:(0,i.cn)("bg-border shrink-0","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",s),...d})});l.displayName=n.b.displayName},41058:(e,r,s)=>{s.d(r,{E:()=>l});var t=s(42289),n=s(28846);s(86645);var a=s(54577);let i=(0,n.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:r,variant:s,...n}=e;return(0,t.jsx)("div",{className:(0,a.cn)(i({variant:s}),r),...n})}},43918:(e,r,s)=>{s.d(r,{_:()=>i});var t=s(42289),n=s(22500),a=s(70381);function i(e){let{subscribe:r}=e,s=(0,a.useTranslations)("subscribe.detail");return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"font-semibold",children:s("productDetail")}),(0,t.jsxs)("ul",{className:"grid grid-cols-1 gap-3 *:flex *:items-center *:justify-between lg:grid-cols-1",children:[(null==r?void 0:r.name)&&(0,t.jsxs)("li",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground line-clamp-2 flex-1",children:null==r?void 0:r.name}),(0,t.jsxs)("span",{children:["x ",(0,t.jsx)("span",{children:(null==r?void 0:r.quantity)||1})]})]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:s("availableTraffic")}),(0,t.jsx)("span",{children:(0,t.jsx)(n.n,{type:"traffic",value:null==r?void 0:r.traffic,unlimited:!0})})]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:s("connectionSpeed")}),(0,t.jsx)("span",{children:(0,t.jsx)(n.n,{type:"trafficSpeed",value:null==r?void 0:r.speed_limit,unlimited:!0})})]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:s("connectedDevices")}),(0,t.jsx)("span",{children:(0,t.jsx)(n.n,{value:null==r?void 0:r.device_limit,type:"number",unlimited:!0})})]})]})]})}},62725:(e,r,s)=>{s.d(r,{J:()=>c});var t=s(42289),n=s(54040),a=s(28846),i=s(86645),l=s(54577);let d=(0,a.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=i.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(n.b,{ref:r,className:(0,l.cn)(d(),s),...a})});c.displayName=n.b.displayName},72511:(e,r,s)=>{s.d(r,{p:()=>i});var t=s(42289),n=s(86645),a=s(54577);let i=n.forwardRef((e,r)=>{let{className:s,type:n,...i}=e;return(0,t.jsx)("input",{type:n,className:(0,a.cn)("border-input file:text-foreground placeholder:text-muted-foreground focus-visible:ring-ring flex h-9 w-full rounded-md border bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-1 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:r,...i})});i.displayName="Input"},91858:(e,r,s)=>{s.d(r,{NP:()=>l,Ov:()=>d,k8:()=>n,kp:()=>a,md:()=>i});var t=s(26713);async function n(e,r){return(0,t.A)("/v1/public/portal/order/checkout",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...r||{}})}async function a(e,r){return(0,t.A)("/v1/public/portal/order/status",{method:"GET",params:{...e},...r||{}})}async function i(e){return(0,t.A)("/v1/public/portal/payment-method",{method:"GET",...e||{}})}async function l(e,r){return(0,t.A)("/v1/public/portal/pre",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...r||{}})}async function d(e,r){return(0,t.A)("/v1/public/portal/purchase",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...r||{}})}},98526:(e,r,s)=>{s.d(r,{M:()=>l});var t=s(42289),n=s(22500),a=s(30862),i=s(70381);function l(e){let{order:r}=e,s=(0,i.useTranslations)("subscribe");return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"font-semibold",children:s("billing.billingTitle")}),(0,t.jsxs)("ul",{className:"grid grid-cols-2 gap-3 *:flex *:items-center *:justify-between lg:grid-cols-1",children:[(null==r?void 0:r.type)&&[1,2].includes(null==r?void 0:r.type)&&(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:s("billing.duration")}),(0,t.jsxs)("span",{children:[(null==r?void 0:r.quantity)||1," ",s((null==r?void 0:r.unit_time)||"Month")]})]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:s("billing.price")}),(0,t.jsx)("span",{children:(0,t.jsx)(n.n,{type:"currency",value:(null==r?void 0:r.price)||(null==r?void 0:r.unit_price)})})]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:s("billing.productDiscount")}),(0,t.jsx)("span",{children:(0,t.jsx)(n.n,{type:"currency",value:null==r?void 0:r.discount})})]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:s("billing.couponDiscount")}),(0,t.jsx)("span",{children:(0,t.jsx)(n.n,{type:"currency",value:null==r?void 0:r.coupon_discount})})]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:s("billing.fee")}),(0,t.jsx)("span",{children:(0,t.jsx)(n.n,{type:"currency",value:null==r?void 0:r.fee_amount})})]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:s("billing.gift")}),(0,t.jsx)("span",{children:(0,t.jsx)(n.n,{type:"currency",value:null==r?void 0:r.gift_amount})})]})]}),(0,t.jsx)(a.w,{}),(0,t.jsxs)("div",{className:"flex items-center justify-between font-semibold",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:s("billing.total")}),(0,t.jsx)("span",{children:(0,t.jsx)(n.n,{type:"currency",value:null==r?void 0:r.amount})})]})]})}}}]);