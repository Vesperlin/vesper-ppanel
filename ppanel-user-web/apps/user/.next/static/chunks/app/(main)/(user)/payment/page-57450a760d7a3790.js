(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6443],{51276:(e,t,s)=>{"use strict";s.d(t,{Bf:()=>o,FM:()=>a,IF:()=>r,Ov:()=>c,Pj:()=>n,Q3:()=>d,T9:()=>u,mB:()=>i});var l=s(26713);async function n(e,t){return(0,l.A)("/v1/public/order/close",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function r(e,t){return(0,l.A)("/v1/public/order/detail",{method:"GET",params:{...e},...t||{}})}async function a(e,t){return(0,l.A)("/v1/public/order/list",{method:"GET",params:{...e},...t||{}})}async function i(e,t){return(0,l.A)("/v1/public/order/pre",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function c(e,t){return(0,l.A)("/v1/public/order/purchase",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function d(e,t){return(0,l.A)("/v1/public/order/recharge",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function o(e,t){return(0,l.A)("/v1/public/order/renewal",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function u(e,t){return(0,l.A)("/v1/public/order/reset",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}},55583:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>k});var l=s(42289),n=s(22500),r=s(12040),a=s(98526),i=s(43918),c=s(85675),d=s(51276),o=s(91858),u=s(83241),x=s(41058),h=s(55033),m=s(86339),p=s(30862),j=s(6492),f=s(84088),v=s(34946),g=s(87918),y=s(74929),b=s(70381),N=s(75249),w=s.n(N),T=s(42405),_=s(86645);function k(){var e;let t=(0,b.useTranslations)("order"),{getUserInfo:s}=(0,c.A)(),[N,k]=(0,_.useState)(),[S,C]=(0,_.useState)(!1),{data:P}=(0,u.I)({enabled:S,queryKey:["queryOrderDetail",N],queryFn:async()=>{var e;let{data:t}=await (0,d.IF)({order_no:N});return(null==t||null==(e=t.data)?void 0:e.status)!==1&&(s(),C(!1)),null==t?void 0:t.data},refetchInterval:3e3}),{data:A}=(0,u.I)({enabled:!!N&&(null==P?void 0:P.status)===1,queryKey:["purchaseCheckout",N],queryFn:async()=>{var e;let{data:t}=await (0,o.k8)({orderNo:N,returnUrl:window.location.href});return(null==(e=t.data)?void 0:e.type)==="url"&&t.data.checkout_url&&window.open(t.data.checkout_url,"_blank"),null==t?void 0:t.data}});(0,_.useEffect)(()=>{let e=new URLSearchParams(location.search);e.get("order_no")&&(k(e.get("order_no")),C(!0))},[]);let[F,O]=(0,v.A)({targetDate:P&&(0,g.GP)((0,y.z)(null==P?void 0:P.created_at,15),"yyyy-MM-dd'T'HH:mm:ss.SSSxxx")}),{hours:q,minutes:E,seconds:I}=O,$=F>0?(0,l.jsxs)(l.Fragment,{children:[1===q.toString().length?"0".concat(q):q," :"," ",1===E.toString().length?"0".concat(E):E," :"," ",1===I.toString().length?"0".concat(I):I]}):(0,l.jsx)(l.Fragment,{children:t("timeExpired")});return(0,l.jsxs)("div",{className:"grid gap-4 xl:grid-cols-2",children:[(0,l.jsxs)(m.Zp,{className:"order-2 xl:order-1",children:[(0,l.jsx)(m.aR,{className:"bg-muted/50 flex flex-row items-start",children:(0,l.jsxs)("div",{className:"grid gap-0.5",children:[(0,l.jsxs)(m.ZB,{className:"flex flex-col text-lg",children:[t("orderNumber"),(0,l.jsx)("span",{children:null==P?void 0:P.orderNo})]}),(0,l.jsxs)(m.BT,{children:[t("createdAt"),": ",(0,f.Yq)(null==P?void 0:P.created_at)]})]})}),(0,l.jsxs)(m.Wu,{className:"grid gap-3 p-6 text-sm",children:[(0,l.jsx)("div",{className:"font-semibold",children:t("paymentMethod")}),(0,l.jsx)("dl",{className:"grid gap-3",children:(0,l.jsx)("div",{className:"flex items-center justify-between",children:(0,l.jsx)("dt",{className:"text-muted-foreground",children:(0,l.jsx)(x.E,{children:(null==P?void 0:P.payment.name)||(null==P?void 0:P.payment.platform)})})})}),(0,l.jsx)(p.w,{}),(null==P?void 0:P.type)&&[1,2].includes(P.type)&&(0,l.jsx)(i._,{subscribe:{...null==P?void 0:P.subscribe,quantity:null==P?void 0:P.quantity}}),(null==P?void 0:P.type)===3&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"font-semibold",children:t("resetTraffic")}),(0,l.jsx)("ul",{className:"grid grid-cols-2 gap-3 *:flex *:items-center *:justify-between lg:grid-cols-1",children:(0,l.jsxs)("li",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-muted-foreground line-clamp-2 flex-1",children:t("resetPrice")}),(0,l.jsx)("span",{children:(0,l.jsx)(n.n,{type:"currency",value:P.amount})})]})})]}),(null==P?void 0:P.type)===4&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"font-semibold",children:t("balanceRecharge")}),(0,l.jsx)("ul",{className:"grid grid-cols-2 gap-3 *:flex *:items-center *:justify-between lg:grid-cols-1",children:(0,l.jsxs)("li",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-muted-foreground line-clamp-2 flex-1",children:t("rechargeAmount")}),(0,l.jsx)("span",{children:(0,l.jsx)(n.n,{type:"currency",value:P.amount})})]})})]}),(0,l.jsx)(p.w,{}),(0,l.jsx)(a.M,{order:{...P,unit_price:null==P||null==(e=P.subscribe)?void 0:e.unit_price}})]})]}),(0,l.jsx)(m.Zp,{className:"order-1 flex flex-auto items-center justify-center xl:order-2",children:(0,l.jsxs)(m.Wu,{className:"py-16",children:[(null==P?void 0:P.status)&&[2,5].includes(null==P?void 0:P.status)&&(0,l.jsxs)("div",{className:"flex flex-col items-center gap-8 text-center",children:[(0,l.jsx)("h3",{className:"text-2xl font-bold tracking-tight",children:t("paymentSuccess")}),(0,l.jsx)(j.Icon,{icon:"mdi:success-circle-outline",className:"text-7xl text-green-500"}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)(h.$,{asChild:!0,children:(0,l.jsx)(w(),{href:"/dashboard",children:t("subscribeNow")})}),(0,l.jsx)(h.$,{variant:"outline",children:(0,l.jsx)(w(),{href:"/document",children:t("viewDocument")})})]})]}),(null==P?void 0:P.status)===1&&(null==A?void 0:A.type)==="url"&&(0,l.jsxs)("div",{className:"flex flex-col items-center gap-8 text-center",children:[(0,l.jsx)("h3",{className:"text-2xl font-bold tracking-tight",children:t("waitingForPayment")}),(0,l.jsx)("p",{className:"flex items-center text-3xl font-bold",children:$}),(0,l.jsx)(j.Icon,{icon:"mdi:access-time",className:"text-muted-foreground text-7xl"}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)(h.$,{onClick:()=>{(null==A?void 0:A.checkout_url)&&(window.location.href=null==A?void 0:A.checkout_url)},children:t("goToPayment")}),(0,l.jsx)(h.$,{variant:"outline",children:(0,l.jsx)(w(),{href:"/subscribe",children:t("productList")})})]})]}),(null==P?void 0:P.status)===1&&(null==A?void 0:A.type)==="qr"&&(0,l.jsxs)("div",{className:"flex flex-col items-center gap-8 text-center",children:[(0,l.jsx)("h3",{className:"text-2xl font-bold tracking-tight",children:t("scanToPay")}),(0,l.jsx)("p",{className:"flex items-center text-3xl font-bold",children:$}),(0,l.jsx)(T.X,{value:(null==A?void 0:A.checkout_url)||"",size:208,imageSettings:{src:"/payment/alipay_f2f.svg",width:24,height:24,excavate:!0}}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)(h.$,{asChild:!0,children:(0,l.jsx)(w(),{href:"/subscribe",children:t("productList")})}),(0,l.jsx)(h.$,{asChild:!0,variant:"outline",children:(0,l.jsx)(w(),{href:"/order",children:t("orderList")})})]})]}),(null==P?void 0:P.status)===1&&(null==A?void 0:A.type)==="stripe"&&(0,l.jsxs)("div",{className:"flex flex-col items-center gap-8 text-center",children:[(0,l.jsx)("h3",{className:"text-2xl font-bold tracking-tight",children:t("waitingForPayment")}),(0,l.jsx)("p",{className:"flex items-center text-3xl font-bold",children:$}),A.stripe&&(0,l.jsx)(r.A,{...A.stripe})]}),(null==P?void 0:P.status)&&[3,4].includes(null==P?void 0:P.status)&&(0,l.jsxs)("div",{className:"flex flex-col items-center gap-8 text-center",children:[(0,l.jsx)("h3",{className:"text-2xl font-bold tracking-tight",children:t("orderClosed")}),(0,l.jsx)(j.Icon,{icon:"mdi:cancel",className:"text-7xl text-red-500"}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)(h.$,{asChild:!0,children:(0,l.jsx)(w(),{href:"/subscribe",children:t("productList")})}),(0,l.jsx)(h.$,{asChild:!0,variant:"outline",children:(0,l.jsx)(w(),{href:"/order",children:t("orderList")})})]})]})]})})]})}},61746:(e,t,s)=>{Promise.resolve().then(s.bind(s,55583))}},e=>{e.O(0,[7162,6318,3607,9077,6976,3241,6794,2973,3538,3769,1098,8207,4445,3367,7358],()=>e(e.s=61746)),_N_E=e.O()}]);